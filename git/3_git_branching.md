# Ветвление в git    

## Что такое ветка  
**Ветка** - это изолированный поток разработки проекта. В таком потоке можно проверять разные идеи, тестировать новую функциональность и так далее. Ветки позволяют экспериментировать с проектом в Git, но при этом сохранять репозиторий в стабильном состоянии.  

![branches](images/branches.png)

Посмотреть список существующих веток проекта можно с помощью команды `git branch`. Команда ```git branch -v``` показывает как список веток, так и информацию о последних коммитах каждой из веток.  

## Создаём ветку  
Для создания веток в Git есть команда `git branch <branch_name>`
> Название ветки в Git может состоять из букв, цифр, а также включать любой из четырёх символов: `.`, `-`, `_`, `/`. Эти символы не несут особого смысла.  

## Шагаем с ветки на ветку  
* команда `git checkout <branch_name>` позволяет переключаться на другую ветку;  
* разные ветки в одном проекте существуют независимо. Изменения в одной не влияют на изменения в другой;  
* в Git можно создать ветку и сразу же перейти в неё командой `git checkout -b <branch_name>`;  
* ветка указывает на коммит, который сделан в ней последним. При этом две ветки могут ссылатться на один и тот же коммит - например, если вы только что создали ветку, но ещё не успели внести в неё коммит.  

## Сравниваем ветки  
* `git diff` может сравнивать ветки по их названиям. Например, команда `git diff main feature/my_feature` выведет разницу между основной веткой и веткой `feature/my_feature`;  
* Git поддерживает суффикс навигации `~`. С его помощью можно сослаться на предыдущие коммиты. Например, если вы находитесь в ветке `main` и хотите вывести разницу между тем коммитом, который был три коммита назад, и текущим, нужно выполнить `git diff main~3 main`.  

## Слияние и удаление веток  
* выполнить слияние веток позволяет команда `git merge <branch_name>`. В качестве параметра указывают название ветки, которую нужно "влить" в текущую;  
* удалять ненужные ветки после слияния - хорошая практика. Так в вашем репозитории всегда будет порядок. За удаление веток отвечает команда `git branch -D <branch_name>` и её щадящий вариант с флагом `-d`. Этот вариант удалит ветку, только если она была полностью объединена с другой - то есть если две ветки стали (или изначально были) частью одной истории.  

## Pull Request  
**Pull Request (PR)** — это механизм, который позволяет разработчикам предложить изменения в репозиторий. Это основной способ внесения изменений в проекты с открытым исходным кодом или в командной разработке.  

Зачем нужен Pull Request:  
* **контроль качества** - позволяет другим разработчикам проверить код перед его добавлением в основную ветку.  
* **обсуждение изменений** - PR предоставляет платформу для обсуждения предлагаемых изменений.  
* **история изменений** - каждый PR сохраняет историю обсуждений и изменений, что полезно для будущего анализа.  

Основные этапы работы с PR:  
1. Разработчик создает ветку (branch) в своем локальном репозитории, вносит изменения (например, добавляет новый функционал или исправляет баги).  
2. После завершения работы разработчик отправляет свою ветку на удаленный репозиторий, командой ```git push -u origin <branch_name>```.  
3. Затем он создает Pull Request, который представляет собой запрос на объединение (мерж) своих изменений с основной веткой.  
4. Другие разработчики или ревьюеры могут просмотреть изменения, оставить комментарии, предложить правки или одобрить PR.  
5. Если изменения одобрены, PR мержится (объединяется) с основной веткой, и изменения становятся частью проекта.  

## Стягивание ветки с удалённого репозитория  
Иногда бывает так, что ветка создаётся не на локальном а на удалённом репозитории. Например так может произойти, если вы работаете с разных устройств. В таких случаях, чтобы просмотреть все ветки на удалённом репозитории используется команда ```git branch -r```. Для просмотра всех веток, как локальных так и на удалённом репозитории, используется команда ```git branch -a```. Команда для "стягивания" ветки с удалённого репозитория на локальный: ```git checkout -b <branch_name> origin/<branch_name>```.